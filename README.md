# FSTR OpenAPI Specification
## Основная информация 
Это API создано для мобильного приложения на Android/iOS, 
которое должно упростить туристам задачу по отправке данных о перевале 
и сократить время обработки запроса.\
Туристы в горах должны вносить данные о перевале в приложение и отправлять их в базу данных, 
как только появится доступ в Интернет.\
Модератор из федерации верифицирует и вносит в базу данных информацию, 
полученную от пользователей, а те в свою очередь видят в мобильном приложении 
статус модерации и могут просматривать базу с объектами, внесёнными другими.\


## Описание API (description)
API имеет следующие пути получения / отправки информации с сервера / на сервер.
* /users (Методы GET/POST)
* /coords (Методы GET/POST) 
* /perevaladded (Методы GET/POST)
* /perevaladded/{id} (Методы GET/PATCH) 
* /perevaladded/{email} (Метод GET)
* /images (Методы GET/POST) 
* /areas (Методы GET/POST) 
* /perevalimages (Методы GET/POST) 
* /sprtypes (Методы GET/POST) 

# Пути
## **/users** 
Включает методы получения списка пользователей и создания нового пользователя. 

* **GET** - Метод получения списка всех пользователей (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
    "email": "Alex@example.com",\
    "phone": "+79131234567",\
    "name": "Alex"\
  }]\

* **POST** - Метод создания нового пользователя. \
Для создания нужно отправить запрос с параметрами пользователя в теле запроса.
Каждый пользователь (User) содержит следующую информацию о себе (в формате JSON):
  [{\
    'email' - тип string (example: Alex@example.com)\
    'phone' - тип string (example: +79131234567)\
    'name' - тип string (example: Alex)\
  }]

## **/coords** 
Включает методы получения координат и добавления новых координат. 

* **GET** - Метод получения всех добавленных координат (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
    "latitude": 45.3842,\
    "longitude": 7.1525,\
    "height": 1200\
  }]

* **POST** - Метод добавления новых координат. \
Для создания новых координат нужно отправить запрос с параметрами координат в теле запроса.
Каждые координаты (Coordinates) содержат следующую информацию (в формате JSON):\
  [{\
    'latitude' - тип number($float) (example: 45.3842)\
    'longitude' - тип number($float) (example: 7.1525)\
    'height' - тип integer (example: 1200)\
  }]

## **/areas** 
Включает методы получения информации о территориях и добавления информации о новых территориях. 

* **GET** - Метод получения информации обо всех территориях (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
    "id_parent": 1,\
    "title": "Хребет Монгольский Алтай"\
  }]

* **POST** - Метод добавления информации о новых территориях. \
Для создания территории нужно отправить запрос с параметрами территорий в теле запроса.
Каждая территория (Area) содержит следующую информацию (в формате JSON):\
  [{\
    'id_parent' - тип integer (example: 1)\
    'title' - тип string (example: 'Хребет Монгольский Алтай')\
  }]

## **/images** 
Включает методы получения ссылок на изображения с перевалом и добавления ссылок на изображения. 

* **GET** - Метод получения ссылок на все изображения (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
    "date_added": "2022-02-21 14:21:51.796151",\
    "title": "Седловина",\
    "img": "/home/user/ico.jpeg"\
  }]

* **POST** - Метод добавления ссылок на изображения. \
Для добавления ссылки на изображение нужно отправить запрос с параметрами изображения в теле запроса.
Каждое изображение (Image) содержит следующую информацию (в формате JSON):\
  [{\
    'date_added' - тип DateTime (example: "2022-02-21 14:21:51.796151")\
    'title' - тип string (example: 'Хребет Монгольский Алтай')\
    'img' - тип string (example: '/home/user/ico.jpeg')\
  }]


## **/perevalimages** 
Включает методы получения связей ID перевала с ID изображений и добавления связанных ID. 

* **GET** - Метод получения всех связей ID перевалов с ID изображений (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
    "pereval_id": 1,\
    "image_id": 2\
  }]

* **POST** - Метод добавления связанных ID изображения и ID перевала. \
Для добавления связи перевала с его изображением нужно отправить запрос с параметрами в теле запроса.
Каждая связь перевала с изображением содержит следующую информацию (в формате JSON):\
  [{\
    'pereval_id' - тип integer (example: 1)\
    'image_id' - тип integer (example: 2)\
  }]


## **/sprtypes** 
Включает методы получения типа передвижения и добавления типа передвижения. 

* **GET** - Метод получения типа передвижения (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
    "title": "пешком"\
  }]

* **POST** - Метод добавления типа передвижения. \
Для добавления типа передвижения нужно отправить запрос с параметрами в теле запроса.
Каждая связь перевала с изображением содержит следующую информацию (в формате JSON):\
  [{\
    'title' - тип string($enum)  (example: 'пешком')\
  }]\
Значение **title** должно принимать значения из списка:\
пешком, лыжи, катамаран, байдарка, плот, сплав, велосипед, автомобиль, мотоцикл, парус, верхом\


## **/perevaladded** 
Включает методы получения основной информации о перевалах и добавления основной информации. 

* **GET** - Метод получения основной информации обо всех перевалах (не требует параметров)\
  Пример ответа на запрос (в формате JSON):\
  [{\
      "user_id": 1,\
      "beautyTitle": "пер. ",\
      "title": "Пхия",\
      "other_titles": "Триев",\
      "level": "summer",\
      "connect": "nothing",\
      "date_added": "2021-09-22 13:18:13",\
      "add_first_time": "2020-09-22 13:18:13",\
      "coord_id": 2,\
      "status": "new"\
    }]


* **POST** - Метод добавления основной информации об одном перевале. \
Для добавления основной информации нужно отправить запрос с параметрами в теле запроса.
Каждая связь перевала с изображением содержит следующую информацию (в формате JSON):\
  [{\
      "user_id": тип integer (example: 1),\
      "beautyTitle": тип string (example: "пер. "),\
      "title": тип string (example:"Пхия"),\
      "other_titles": тип string (example:"Триев"),\
      "level": тип string (example:"summer"),\
      "connect": тип string (example:"nothing"),\
      "date_added": тип string (example:"2021-09-22 13:18:13"),\
      "add_first_time": тип string (example:"2020-09-22 13:18:13"),\
      "coord_id": тип integer (example: 2),\
      "status": тип string (example:"new")\
    }]\
Значение **status** должно принимать значения из списка:\
new, pending, accepted, rejected\
Значение **level** должно принимать значения из списка:\
winter, summer, autumn, spring\



## **/perevaladded/{id}** 
Включает методы получения основной информации об одном перевале и изменения основной информации. 

* **GET** - Метод получения основной информации об одном перевале\
Для получения основной информации нужно отправить запрос с параметром **id** (тип - integer) в пути запроса.
  Пример ответа на запрос (в формате JSON):\
  [{\
      "user_id": 1,\
      "beautyTitle": "пер. ",\
      "title": "Пхия",\
      "other_titles": "Триев",\
      "level": "summer",\
      "connect": "nothing",\
      "date_added": "2021-09-22 13:18:13",\
      "add_first_time": "2020-09-22 13:18:13",\
      "coord_id": 2,\
      "status": "new"\
    }]


* **PATCH** - Метод изменения основной информации об одном перевале. \
Для изменения основной информации нужно отправить запрос с параметром **id** (тип - integer) в пути запроса.\
А также необходимо указать параметры в теле запроса.\
Каждая связь перевала с изображением содержит следующую информацию (в формате JSON):\
  [{\
      "beautyTitle": тип string (example: "пер. "),\
      "title": тип string (example:"Пхия"),\
      "other_titles": тип string (example:"Триев"),\
      "level": тип string (example:"summer"),\
      "connect": тип string (example:"nothing"),\
      "coord_id": тип integer (example: 2),\
      "status": тип string (example:"new")\
    }]\
Значение **status** должно принимать значения из списка:\
new, pending, accepted, rejected\
Значение **level** должно принимать значения из списка:\
winter, summer, autumn, spring\


## **/perevaladded/{email}** 
Включает метод получения информации обо всех перевалах, добавленных пользователем с данным email. 
* **GET** - Метод получения основной информации обо всех перевалах, добавленных пользователем.\
Для получения информации нужно отправить запрос с параметром **email** (тип - string) в пути запроса.
  Пример ответа на запрос (в формате JSON):\
  [{\
      "user_id": 2,\
      "beautyTitle": "пер.",\
      "title": "dfghvfg",\
      "other_titles": "dfgnvs",\
      "level": "autumn",\
      "connect": "nothing",\
      "date_added": "2023-07-06T14:50:27.505037Z",\
      "add_first_time": "2019-09-22T13:18:13Z",\
      "coord_id": 1,\
      "status": "rejected"\
    },\
    {\
      "user_id": 2,\
      "beautyTitle": "пер.",\
      "title": "Чуия",\
      "other_titles": "etyhj",\
      "level": "spring",\
      "connect": "nothing",\
      "date_added": "2023-07-10T14:45:30.108499Z",\
      "add_first_time": "2021-09-22T13:18:13Z",\
      "coord_id": 2,\
      "status": "new"\
  }]

# При